# 279. Perfect Squares
Given an integer n, return the least number of perfect square numbers that sum to n.

A perfect square is an integer that is the square of an integer; in other words, it is the product of some integer with itself. For example, 1, 4, 9, and 16 are perfect squares while 3 and 11 are not.

 

Example 1:

Input: n = 12
Output: 3
Explanation: 12 = 4 + 4 + 4.
Example 2:

Input: n = 13
Output: 2
Explanation: 13 = 4 + 9.
 

Constraints:

1 <= n <= 104

```python
class Solution(object):
    def numSquares(self, n):
        """
        :type n: int
        :rtype: int
        """

        if n == 0:
            return 0

        visited = set()
        queue = collections.deque()

        visited.add(n)
        queue.append(n)

        count = 0
        while queue:
            count+=1
            size = len(queue)
            for _ in range(size):
                value = queue.popleft()
                for i in range(1,int(math.sqrt(value)+1)):
                    x = value -i * i
                    if x == 0:
                        return count
                    if x not in visited:
                        queue.append(x)
                        visited.add(x)
        
        return count
```

ä½ é—®å¾—ç‰¹åˆ«å¥½ï¼è¿™æ®µä»£ç æ˜¯ **ç”¨ BFSï¼ˆå¹¿åº¦ä¼˜å…ˆæœç´¢ï¼‰æ¥è§£å†³â€œæœ€å°‘å®Œå…¨å¹³æ–¹æ•°ä¹‹å’Œâ€çš„é—®é¢˜**ã€‚

æˆ‘ä»¬é€å¥æ‹†è§£ä½ æ ‡å‡ºçš„éƒ¨åˆ†ï¼Œå¸®åŠ©ä½ ç†è§£èƒŒåçš„é€»è¾‘å’ŒåŸå›  ğŸ‘‡

---

## ğŸ“Œ èƒŒæ™¯ï¼šé¢˜ç›®è¦æ±‚

> ç»™ä½ ä¸€ä¸ªæ•´æ•° `n`ï¼Œæ±‚æœ€å°‘æœ‰å‡ ä¸ª**å®Œå…¨å¹³æ–¹æ•°ï¼ˆæ¯”å¦‚ 1, 4, 9, 16...ï¼‰**ç›¸åŠ ç­‰äº `n`ã€‚

ä¾‹å¦‚ï¼š
- `n = 12` â†’ ç»“æœæ˜¯ 3ï¼Œå› ä¸º `4 + 4 + 4 = 12`
- `n = 13` â†’ ç»“æœæ˜¯ 2ï¼Œå› ä¸º `4 + 9 = 13`

---

## ğŸ§  è¿™æ®µä»£ç æ•´ä½“æ€è·¯æ˜¯ BFSï¼ˆå±‚çº§éå†ï¼‰ï¼š

ä½ å¯ä»¥æŠŠè¿™ä¸ªè¿‡ç¨‹æƒ³è±¡æˆï¼š

> ä» `n` å‡ºå‘ï¼Œæ¯æ¬¡â€œå°è¯•å‡å»ä¸€ä¸ªå¹³æ–¹æ•°â€ï¼Œç„¶åçœ‹æœ€å°‘å‡ æ­¥èƒ½å‡åˆ° 0ã€‚

---

## ğŸ” æ‹†è§£è¿™æ®µå…³é”®ä»£ç ï¼š

```python
count = 0
while queue:
    count += 1  # å½“å‰å±‚æ•°ï¼ˆæ­¥æ•°ï¼‰ï¼ŒBFS çš„ depth
    size = len(queue)
    for _ in range(size):
        value = queue.pop()  # å–å‡ºå½“å‰è¿™ä¸€å±‚çš„ä¸€ä¸ªèŠ‚ç‚¹ï¼ˆå€¼ï¼‰
```

### âœ³ï¸ è§£é‡Šï¼š

- `count` è¡¨ç¤ºä½ ç”¨äº†å‡ ä¸ªå¹³æ–¹æ•°
- `size = len(queue)` æ˜¯ä¸ºäº†**è®°å½•å½“å‰ BFS è¿™ä¸€å±‚æœ‰å¤šå°‘èŠ‚ç‚¹**
- æ¥ä¸‹æ¥ `for _ in range(size)`ï¼š**å¤„ç†å½“å‰å±‚çš„æ‰€æœ‰èŠ‚ç‚¹**

ä¸ºä»€ä¹ˆè¿™æ ·åšï¼Ÿ
- å› ä¸º BFS æ˜¯æŒ‰å±‚èµ°çš„ï¼Œæˆ‘ä»¬è¦**ä¸€å±‚ä¸€å±‚åœ°æ‰©å±•å¯èƒ½çš„è§£æ³•**
- æ¯æ¬¡æ‰©å±•å°±æ˜¯â€œå†å‡å»ä¸€ä¸ªå¹³æ–¹æ•°â€ï¼Œæ‰€ä»¥ count += 1

---

### ğŸ‘‡ ç„¶åï¼š

```python
        for i in range(1, int(math.sqrt(value)) + 1):
            x = value - i * i
            if x == 0:
                return count
            if x not in visited:
                queue.appendleft(x)
                visited.add(x)
```

### âœ³ï¸ è§£é‡Šï¼š

- éå†æ‰€æœ‰å¯èƒ½çš„å¹³æ–¹æ•°ï¼š1Â², 2Â², ..., âˆšvalueÂ²
- æ¯æ¬¡å°è¯•å‡å» \( i^2 \)ï¼Œçœ‹å‰©ä¸‹çš„å€¼ `x = value - iÂ²`
- å¦‚æœ `x == 0`ï¼šè¯´æ˜æˆåŠŸäº†ï¼Œç”¨äº† `count` æ­¥å‡åˆ° 0ï¼Œç›´æ¥è¿”å›
- å¦åˆ™ï¼Œå¦‚æœ `x` æ²¡å‡ºç°è¿‡ï¼Œå°±å…¥é˜Ÿå¹¶æ ‡è®°ä¸ºè®¿é—®è¿‡

---

## ğŸ§  ä¸¾ä¸ªä¾‹å­ï¼š

å¦‚æœ `n = 12`ï¼Œæˆ‘ä»¬æ¥çœ‹å‰å‡ æ­¥ï¼š

```
åˆå§‹ queue: [12]
count = 1

ç¬¬ä¸€å±‚ï¼š
12 - 1^2 = 11
12 - 2^2 = 8
12 - 3^2 = 3
queue = [11, 8, 3]
count = 2

ç¬¬äºŒå±‚ï¼š
8 - 1^2 = 7, 8 - 2^2 = 4
...
3 - 1^2 = 2, 3 - 2^2 = -1 âŒ
...
ç›´åˆ°æŸä¸€å±‚å‡ºç° x == 0ï¼Œè¿”å› count
```

---

## âœ… æ€»ç»“ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡ï¼š

| è®¾è®¡ | ç›®çš„ |
|------|------|
| `size = len(queue)` + `for _ in range(size)` | ä¿è¯ BFS ä¸€å±‚ä¸€å±‚åœ°æ¨è¿›ï¼Œè®°å½•â€œç”¨äº†å‡ æ­¥â€ |
| `value - i*i` | è¡¨ç¤ºå‡å»ä¸€ä¸ªå¹³æ–¹æ•°ï¼ˆç›¸å½“äºä¸‹ä¸€æ­¥ï¼‰ |
| `visited` é›†åˆ | é¿å…é‡å¤è®¡ç®—ã€æ­»å¾ªç¯ |
| `if x == 0` å°±è¿”å› | ç¬¬ä¸€æ¬¡æ‰¾åˆ°åˆæ³•è§£ï¼Œä¿è¯æ˜¯â€œæœ€å°‘æ­¥æ•°â€ |

---

## ğŸ›  å°ä¼˜åŒ–å»ºè®®ï¼š

ä½ ç”¨äº†ï¼š
```python
value = queue.pop()
queue.appendleft(x)
```

å¦‚æœä½ æ”¹æˆï¼š
```python
value = queue.popleft()
queue.append(x)
```

è¯­ä¹‰ä¸Šæ›´æ¸…æ™°ï¼Œä¹Ÿæ›´ç¬¦åˆ BFS çš„â€œé˜Ÿå¤´å‡ºã€é˜Ÿå°¾å…¥â€çš„æµç¨‹ï¼ˆFIFOï¼‰ã€‚

---

ä½ è¿˜æƒ³ä¸æƒ³æˆ‘ç”¨å›¾æˆ–è€…åŠ¨ç”»å½¢å¼å¸®ä½ å¯è§†åŒ–æ•´ä¸ª BFS è·¯å¾„ï¼Ÿæˆ–è€…æˆ‘ä¹Ÿå¯ä»¥å±•ç¤ºå¦‚ä½•ç”¨åŠ¨æ€è§„åˆ’ï¼ˆDPï¼‰åšè¿™é¢˜æ¥å¯¹æ¯”ä¸€ä¸‹æ€è·¯ï½




